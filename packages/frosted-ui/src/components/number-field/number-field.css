.fui-NumberFieldRoot {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.fui-NumberFieldGroup {
  display: flex;
  align-items: center;
  position: relative;
  z-index: 0;
  isolation: isolate;
}

/* Input styling - extends TextField styles */
.fui-NumberFieldInput {
  /* Remove spinner buttons in WebKit/Blink */
  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  /* Remove spinner buttons in Firefox */
  -moz-appearance: textfield;
  appearance: textfield;

  /* Ensure input border shows above adjacent buttons when focused */
  &:focus {
    z-index: 4; /* Above chrome */

    & + .fui-TextFieldChrome {
      z-index: 3; /* Above buttons (z-index: 1-2) but below input */
    }
  }
}

/* Button base - IconButton handles the variant styling, we handle size and layout */
.fui-NumberFieldButton {
  flex-shrink: 0;
  position: relative;
  z-index: 1; /* Above TextFieldChrome (z-index: 0) so button backgrounds cover chrome borders */

  /* Hovered/focused button should appear above other buttons for border visibility */
  &:hover {
    z-index: 2;
  }

  &:focus-visible {
    z-index: 3;
  }

  /* Size variants - override IconButton defaults for number field */
  &:where(.fui-r-size-1) {
    width: var(--space-5);
    height: var(--space-5);
    border-radius: max(6px, var(--radius-full));
  }

  &:where(.fui-r-size-2) {
    width: var(--space-6);
    height: var(--space-6);
    border-radius: max(8px, var(--radius-full));
  }

  &:where(.fui-r-size-3) {
    width: var(--space-7);
    height: var(--space-7);
    border-radius: max(10px, var(--radius-full));
  }

  &:where(.fui-r-size-4) {
    width: var(--space-8);
    height: var(--space-8);
    border-radius: max(14px, var(--radius-full));
  }
}

/***************************************************************************************************
 * SPLIT LAYOUT - Buttons on either side of input: [-] [input] [+]
 ***************************************************************************************************/

.fui-NumberFieldGroup[data-button-layout='split'] {
  & > .fui-NumberFieldInput {
    text-align: center;
    text-indent: 0 !important;
    border-radius: 0 !important;
  }

  & > .fui-NumberFieldDecrement {
    order: -1;
  }

  & > .fui-NumberFieldIncrement {
    order: 1;
  }

  /* Decrement border radius (left side) */
  & > .fui-NumberFieldDecrement {
    &:where(.fui-r-size-1) {
      border-radius: max(6px, var(--radius-full)) 0 0 max(6px, var(--radius-full));
    }
    &:where(.fui-r-size-2) {
      border-radius: max(8px, var(--radius-full)) 0 0 max(8px, var(--radius-full));
    }
    &:where(.fui-r-size-3) {
      border-radius: max(10px, var(--radius-full)) 0 0 max(10px, var(--radius-full));
    }
    &:where(.fui-r-size-4) {
      border-radius: max(14px, var(--radius-full)) 0 0 max(14px, var(--radius-full));
    }
  }

  /* Increment border radius (right side) */
  & > .fui-NumberFieldIncrement {
    &:where(.fui-r-size-1) {
      border-radius: 0 max(6px, var(--radius-full)) max(6px, var(--radius-full)) 0;
    }
    &:where(.fui-r-size-2) {
      border-radius: 0 max(8px, var(--radius-full)) max(8px, var(--radius-full)) 0;
    }
    &:where(.fui-r-size-3) {
      border-radius: 0 max(10px, var(--radius-full)) max(10px, var(--radius-full)) 0;
    }
    &:where(.fui-r-size-4) {
      border-radius: 0 max(14px, var(--radius-full)) max(14px, var(--radius-full)) 0;
    }
  }

  /* TextFieldChrome positioning - overlap 1px into buttons to hide input borders */
  & > .fui-TextFieldChrome {
    border-radius: 0;
  }

  &:has(.fui-r-size-1) > .fui-TextFieldChrome {
    left: calc(var(--space-5) - 1px);
    right: calc(var(--space-5) - 1px);
  }

  &:has(.fui-r-size-2) > .fui-TextFieldChrome {
    left: calc(var(--space-6) - 1px);
    right: calc(var(--space-6) - 1px);
  }

  &:has(.fui-r-size-3) > .fui-TextFieldChrome {
    left: calc(var(--space-7) - 1px);
    right: calc(var(--space-7) - 1px);
  }

  &:has(.fui-r-size-4) > .fui-TextFieldChrome {
    left: calc(var(--space-8) - 1px);
    right: calc(var(--space-8) - 1px);
  }
}

/***************************************************************************************************
 * STACKED LAYOUT - Buttons stacked on right side: [input] [+]
 *                                                         [-]
 ***************************************************************************************************/

.fui-NumberFieldButtonGroup {
  display: flex;
  flex-direction: column;
  margin-left: -1px; /* Collapse border with input chrome */
}

.fui-NumberFieldGroup[data-button-layout='stacked'] {
  & > .fui-NumberFieldInput {
    text-align: left;

    &:where(.fui-r-size-1) {
      text-indent: calc(var(--space-1) * 1.5 - var(--text-field-border-width)) !important;
      border-radius: max(6px, var(--radius-full)) 0 0 max(6px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-2) {
      text-indent: calc(var(--space-2) - var(--text-field-border-width)) !important;
      border-radius: max(8px, var(--radius-full)) 0 0 max(8px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-3) {
      text-indent: calc(var(--space-3) - var(--text-field-border-width)) !important;
      border-radius: max(10px, var(--radius-full)) 0 0 max(10px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-4) {
      text-indent: calc(var(--space-3) - var(--text-field-border-width)) !important;
      border-radius: max(14px, var(--radius-full)) 0 0 max(14px, var(--radius-full)) !important;
    }
  }

  /* Button group styling */
  & .fui-NumberFieldButtonGroup {
    & .fui-NumberFieldButton {
      border-radius: 0;
    }

    /* Increment (top button) */
    & .fui-NumberFieldIncrement {
      &:where(.fui-r-size-1) {
        border-top-right-radius: max(6px, var(--radius-full));
      }
      &:where(.fui-r-size-2) {
        border-top-right-radius: max(8px, var(--radius-full));
      }
      &:where(.fui-r-size-3) {
        border-top-right-radius: max(10px, var(--radius-full));
      }
      &:where(.fui-r-size-4) {
        border-top-right-radius: max(14px, var(--radius-full));
      }
    }

    /* Decrement (bottom button) - collapse border with top button */
    & .fui-NumberFieldDecrement {
      margin-top: -1px;

      &:where(.fui-r-size-1) {
        border-bottom-right-radius: max(6px, var(--radius-full));
      }
      &:where(.fui-r-size-2) {
        border-bottom-right-radius: max(8px, var(--radius-full));
      }
      &:where(.fui-r-size-3) {
        border-bottom-right-radius: max(10px, var(--radius-full));
      }
      &:where(.fui-r-size-4) {
        border-bottom-right-radius: max(14px, var(--radius-full));
      }
    }
  }

  /* Stacked button sizes - half height + 0.5px to compensate for -1px border collapse */
  & .fui-NumberFieldButton {
    &:where(.fui-r-size-1) {
      height: calc(var(--space-5) / 2 + 0.5px) !important;
      width: calc(var(--space-5) * 0.75) !important;
      padding: 0;

      & svg {
        width: 6px;
        height: 6px;
      }
    }

    &:where(.fui-r-size-2) {
      height: calc(var(--space-6) / 2 + 0.5px) !important;
      width: calc(var(--space-6) * 0.75) !important;
      padding: 0;

      & svg {
        width: 8px;
        height: 8px;
      }
    }

    &:where(.fui-r-size-3) {
      height: calc(var(--space-7) / 2 + 0.5px) !important;
      width: calc(var(--space-7) * 0.75) !important;
      padding: 0;

      & svg {
        width: 10px;
        height: 10px;
      }
    }

    &:where(.fui-r-size-4) {
      height: calc(var(--space-8) / 2 + 0.5px) !important;
      width: calc(var(--space-8) * 0.85) !important;
      padding: 0;

      & svg {
        width: 12px;
        height: 12px;
      }
    }
  }

  /* TextFieldChrome positioning - account for button group margin-left: -1px */
  & > .fui-TextFieldChrome {
    left: 0;
  }

  &:has(.fui-r-size-1) > .fui-TextFieldChrome {
    right: calc(var(--space-5) * 0.75 - 1px);
    border-radius: max(6px, var(--radius-full)) 0 0 max(6px, var(--radius-full));
  }

  &:has(.fui-r-size-2) > .fui-TextFieldChrome {
    right: calc(var(--space-6) * 0.75 - 1px);
    border-radius: max(8px, var(--radius-full)) 0 0 max(8px, var(--radius-full));
  }

  &:has(.fui-r-size-3) > .fui-TextFieldChrome {
    right: calc(var(--space-7) * 0.75 - 1px);
    border-radius: max(10px, var(--radius-full)) 0 0 max(10px, var(--radius-full));
  }

  &:has(.fui-r-size-4) > .fui-TextFieldChrome {
    right: calc(var(--space-8) * 0.85 - 1px);
    border-radius: max(14px, var(--radius-full)) 0 0 max(14px, var(--radius-full));
  }
}

/***************************************************************************************************
 * TRAILING LAYOUT - Buttons in a row on right side: [input] [-] [+]
 ***************************************************************************************************/

.fui-NumberFieldGroup[data-button-layout='trailing'] {
  & > .fui-NumberFieldInput {
    text-align: left;

    &:where(.fui-r-size-1) {
      text-indent: calc(var(--space-1) * 1.5 - var(--text-field-border-width)) !important;
      border-radius: max(6px, var(--radius-full)) 0 0 max(6px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-2) {
      text-indent: calc(var(--space-2) - var(--text-field-border-width)) !important;
      border-radius: max(8px, var(--radius-full)) 0 0 max(8px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-3) {
      text-indent: calc(var(--space-3) - var(--text-field-border-width)) !important;
      border-radius: max(10px, var(--radius-full)) 0 0 max(10px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-4) {
      text-indent: calc(var(--space-3) - var(--text-field-border-width)) !important;
      border-radius: max(14px, var(--radius-full)) 0 0 max(14px, var(--radius-full)) !important;
    }
  }

  /* Button group in row */
  & .fui-NumberFieldButtonGroup {
    flex-direction: row;

    & .fui-NumberFieldButton {
      border-radius: 0;
    }

    /* Increment (right button) - collapse border with left button */
    & .fui-NumberFieldIncrement {
      margin-left: -1px;

      &:where(.fui-r-size-1) {
        border-top-right-radius: max(6px, var(--radius-full));
        border-bottom-right-radius: max(6px, var(--radius-full));
      }
      &:where(.fui-r-size-2) {
        border-top-right-radius: max(8px, var(--radius-full));
        border-bottom-right-radius: max(8px, var(--radius-full));
      }
      &:where(.fui-r-size-3) {
        border-top-right-radius: max(10px, var(--radius-full));
        border-bottom-right-radius: max(10px, var(--radius-full));
      }
      &:where(.fui-r-size-4) {
        border-top-right-radius: max(14px, var(--radius-full));
        border-bottom-right-radius: max(14px, var(--radius-full));
      }
    }
  }

  /* TextFieldChrome positioning - account for button group margin-left: -1px and increment margin-left: -1px */
  & > .fui-TextFieldChrome {
    left: 0;
    border-radius: 0;
  }

  &:has(.fui-r-size-1) > .fui-TextFieldChrome {
    right: calc(var(--space-5) * 2 - 2px);
    border-radius: max(6px, var(--radius-full)) 0 0 max(6px, var(--radius-full));
  }

  &:has(.fui-r-size-2) > .fui-TextFieldChrome {
    right: calc(var(--space-6) * 2 - 2px);
    border-radius: max(8px, var(--radius-full)) 0 0 max(8px, var(--radius-full));
  }

  &:has(.fui-r-size-3) > .fui-TextFieldChrome {
    right: calc(var(--space-7) * 2 - 2px);
    border-radius: max(10px, var(--radius-full)) 0 0 max(10px, var(--radius-full));
  }

  &:has(.fui-r-size-4) > .fui-TextFieldChrome {
    right: calc(var(--space-8) * 2 - 2px);
    border-radius: max(14px, var(--radius-full)) 0 0 max(14px, var(--radius-full));
  }
}

/***************************************************************************************************
 * NO BUTTONS - Restore full styling when buttonLayout="none"
 ***************************************************************************************************/

.fui-NumberFieldGroup:not(:has(.fui-NumberFieldButton)) {
  & > .fui-NumberFieldInput {
    text-align: left;

    &:where(.fui-r-size-1) {
      text-indent: calc(var(--space-1) * 1.5 - var(--text-field-border-width)) !important;
      border-radius: max(6px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-2) {
      text-indent: calc(var(--space-2) - var(--text-field-border-width)) !important;
      border-radius: max(8px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-3) {
      text-indent: calc(var(--space-3) - var(--text-field-border-width)) !important;
      border-radius: max(10px, var(--radius-full)) !important;
    }
    &:where(.fui-r-size-4) {
      text-indent: calc(var(--space-3) - var(--text-field-border-width)) !important;
      border-radius: max(14px, var(--radius-full)) !important;
    }
  }

  & > .fui-TextFieldChrome {
    left: 0;
    right: 0;

    &:where(.fui-r-size-1) {
      border-radius: max(6px, var(--radius-full));
    }
    &:where(.fui-r-size-2) {
      border-radius: max(8px, var(--radius-full));
    }
    &:where(.fui-r-size-3) {
      border-radius: max(10px, var(--radius-full));
    }
    &:where(.fui-r-size-4) {
      border-radius: max(14px, var(--radius-full));
    }
  }
}

/***************************************************************************************************
 * SCRUB AREA
 ***************************************************************************************************/

.fui-NumberFieldScrubArea {
  cursor: ew-resize;
  user-select: none;
  -webkit-user-select: none;
}

.fui-NumberFieldScrubAreaCursor {
  position: fixed;
  pointer-events: none;
  z-index: 1000;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));

  & svg {
    display: block;
  }
}

/***************************************************************************************************
 * DISABLED & READ-ONLY STATES
 ***************************************************************************************************/

.fui-NumberFieldRoot[data-disabled] {
  & .fui-NumberFieldInput {
    cursor: text;
    color: var(--gray-a11);
    -webkit-text-fill-color: var(--gray-a11);
  }
}
